+ tag=debian-testing-ocaml-4.02.1
+ script=mirage-skeleton
+ repo=avsm/docker-opam-build
+ docker=docker.io
+ pwd
+ sudo docker.io run --rm=true -v /home/opam/is-mirage-broken/scripts:/scripts -t avsm/docker-opam-build:debian-testing-ocaml-4.02.1 sh -c /scripts/mirage-skeleton
+ export MIRAGE_APPLICATION=skeleton
+ . /scripts/build_mirage
+ [ -z skeleton ]
+ [ -d .git ]
+ git pull
remote: Counting objects: 4, done.[K
remote: Compressing objects:  33% (1/3)   [Kremote: Compressing objects:  66% (2/3)   [Kremote: Compressing objects: 100% (3/3)   [Kremote: Compressing objects: 100% (3/3), done.[K
remote: Total 4 (delta 0), reused 0 (delta 0), pack-reused 1[K
Unpacking objects:  25% (1/4)   Unpacking objects:  50% (2/4)   Unpacking objects:  75% (3/4)   Unpacking objects: 100% (4/4)   Unpacking objects: 100% (4/4), done.
From git://github.com/ocaml/opam-repository
   89ab4a9..090af1b  master     -> origin/master
Updating 89ab4a9..090af1b
Fast-forward
 .travis-ci.sh | 6 [32m++[m[31m----[m
 1 file changed, 2 insertions(+), 4 deletions(-)
+ opam remote add mirage git://github.com/mirage/mirage-dev
[KProcessing: [[1;34mmirage[m: git][K[KProcessing: [[1;34mmirage[m: git][K[KProcessing: [[1;34mmirage[m: git][K[KProcessing: [[1;34mmirage[m: git][K[KProcessing: [[1;34mmirage[m: git][K[KProcessing: [[1;34mmirage[m: git][K[[1;34mmirage[m] git://github.com/mirage/mirage-dev updated
+ opam update -u

[36m=-=-[m [01mUpdating package repositories[m [36m=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=[m
[KProcessing  1/2: [[1;34mdefault[m: local][K[KProcessing  2/2: [[1;34mdefault[m: local] [[1;34mmirage[m: git][K[KProcessing  2/2: [[1;34mdefault[m: local] [[1;34mmirage[m: git][K[KProcessing  2/2: [[1;34mdefault[m: local] [[1;34mmirage[m: git][K[KProcessing  2/2: [[1;34mdefault[m: local] [[1;34mmirage[m: git][K[KProcessing  2/2: [[1;34mdefault[m: local] [[1;34mmirage[m: git][K[[1;34mmirage[m] git://github.com/mirage/mirage-dev already up-to-date
[KProcessing  2/2: [[1;34mdefault[m: local][K[KProcessing  2/2: [[1;34mdefault[m: local][K[[1;34mdefault[m] /home/opam/opam-repository synchronized

Already up-to-date.
+ opam installext -j 3 mirage ssl
++ opam install -j 3 mirage ssl -e debian
+ depext='libssl-dev m4'
+ echo Debian depexts: libssl-dev m4
Debian depexts: libssl-dev m4
+ '[' 'libssl-dev m4' '!=' '' ']'
+ sudo apt-get update -y
0% [Working]            0% [Connecting to security.debian.org]                                      Get:1 http://security.debian.org testing/updates InRelease [84.1 kB]
                                      100% [Working]              Get:2 http://http.debian.net testing InRelease [199 kB]
100% [Working]              100% [1 InRelease gpgv 84.1 kB] [Waiting for headers]                                                     Get:3 http://http.debian.net testing-updates InRelease [117 kB]
                                                     74% [1 InRelease gpgv 84.1 kB] [3 InRelease 13.0 kB/117 kB 11%]                                                               100% [1 InRelease gpgv 84.1 kB]100% [1 InRelease gpgv 84.1 kB]100% [1 InRelease gpgv 84.1 kB]100% [1 InRelease gpgv 84.1 kB]                               E: Release file for http://security.debian.org/dists/testing/updates/InRelease is expired (invalid since 21h 21min 2s). Updates for this repository will not be applied.
+ sudo apt-get install -qq -y build-essential m4
+ sudo apt-get install -qq -y libssl-dev m4
WARNING: The following packages cannot be authenticated!
  zlib1g-dev libssl-dev libssl-doc
E: There are problems and -y was used without --force-yes
++ opam install -j 3 mirage ssl -e source,linux
+ srcext=
+ echo Debian srcexts:
Debian srcexts:
+ '[' '' '!=' '' ']'
+ opam install -j 3 mirage ssl
The following actions will be performed:
  - install [01mcmdliner[m      0.9.7                         [required by mirage]
  - install [01mocamlfind[m     1.5.5                         [required by ssl]
  - install [01mssl[m           0.4.7    
  - install [01mre[m            1.2.2                         [required by mirage]
  - install [01mcrunch[m        1.4.0                         [required by mirage]
  - install [01mcamlp4[m        4.02.1+2                      [required by cstruct]
  - install [01mtype_conv[m     112.01.00                     [required by cstruct, ipaddr]
  - install [01moptcomp[m       1.6                           [required by ocplib-endian]
  - install [01mlwt[m           2.4.5                         [required by mirage]
  - install [01msexplib[m       112.17.00                     [required by mirage]
  - install [01mocplib-endian[m 0.4                           [required by cstruct]
  - install [01mipaddr[m        2.5.0                         [required by mirage]
  - install [01mcstruct[m       1.5.0                         [required by mirage]
  - install [01mio-page[m       1.4.0                         [required by mirage]
  - install [01mmirage-types[m  2.3.0                         [required by mirage]
  - install [01mmirage[m        2.3.0    
===== [33m16[m to install =====

[36m=-=-[m [01mGathering sources[m [36m=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=[m
[KProcessing  1/16: [[32mcamlp4[m: http][K[KProcessing  2/16: [[32mcamlp4[m: http] [[32mcmdliner[m: http][K[KProcessing  3/16: [[32mcamlp4[m: http] [[32mcmdliner[m: http] [[32mcrunch[m: http][K[KProcessing  3/16: [[32mcamlp4[m: http] [[32mcmdliner[m: http] [[32mcrunch[m: http][K[KProcessing  3/16: [[32mcamlp4[m: http] [[32mcmdliner[m: http] [[32mcrunch[m: http][K[KProcessing  3/16: [[32mcamlp4[m: http] [[32mcmdliner[m: http] [[32mcrunch[m: http][K[[32mcrunch.1.4.0[m] https://github.com/mirage/ocaml-crunch/archive/v1.4.0.tar.gz downloaded
[KProcessing  3/16: [[32mcamlp4[m: http] [[32mcmdliner[m: http][K[KProcessing  4/16: [[32mcamlp4[m: http] [[32mcmdliner[m: http] [[32mcstruct[m: http][K[[32mcamlp4.4.02.1+2[m] https://github.com/ocaml/camlp4/archive/4.02.1+2.tar.gz downloaded
[KProcessing  4/16: [[32mcmdliner[m: http] [[32mcstruct[m: http][K[KProcessing  5/16: [[32mcmdliner[m: http] [[32mcstruct[m: http] [[32mio-page[m: http][K[[32mcmdliner.0.9.7[m] http://erratique.ch/software/cmdliner/releases/cmdliner-0.9.7.tbz downloaded
[KProcessing  5/16: [[32mcstruct[m: http] [[32mio-page[m: http][K[KProcessing  6/16: [[32mcstruct[m: http] [[32mio-page[m: http] [[32mipaddr[m: http][K[KProcessing  6/16: [[32mcstruct[m: http] [[32mio-page[m: http] [[32mipaddr[m: http][K[[32mcstruct.1.5.0[m] https://github.com/mirage/ocaml-cstruct/archive/v1.5.0.tar.gz downloaded
[KProcessing  6/16: [[32mio-page[m: http] [[32mipaddr[m: http][K[KProcessing  7/16: [[32mio-page[m: http] [[32mipaddr[m: http] [[32mlwt[m: http][K[KProcessing  7/16: [[32mio-page[m: http] [[32mipaddr[m: http] [[32mlwt[m: http][K[KProcessing  7/16: [[32mio-page[m: http] [[32mipaddr[m: http] [[32mlwt[m: http][K[[32mio-page.1.4.0[m] https://github.com/mirage/io-page/archive/v1.4.0.tar.gz downloaded
[KProcessing  7/16: [[32mipaddr[m: http] [[32mlwt[m: http][K[KProcessing  8/16: [[32mipaddr[m: http] [[32mlwt[m: http] [[32mmirage[m: http][K[[32mipaddr.2.5.0[m] https://github.com/mirage/ocaml-ipaddr/archive/2.5.0.tar.gz downloaded
[KProcessing  8/16: [[32mlwt[m: http] [[32mmirage[m: http][K[KProcessing  9/16: [[32mlwt[m: http] [[32mmirage[m: http] [[32mmirage-types[m: http][K[KProcessing  9/16: [[32mlwt[m: http] [[32mmirage[m: http] [[32mmirage-types[m: http][K[KProcessing  9/16: [[32mlwt[m: http] [[32mmirage[m: http] [[32mmirage-types[m: http][K[KProcessing  9/16: [[32mlwt[m: http] [[32mmirage[m: http] [[32mmirage-types[m: http][K[[32mlwt.2.4.5[m] https://github.com/ocsigen/lwt/archive/2.4.5.tar.gz downloaded
[KProcessing  9/16: [[32mmirage[m: http] [[32mmirage-types[m: http][K[KProcessing 10/16: [[32mmirage[m: http] [[32mmirage-types[m: http] [[32mocamlfind[m: http][K[[32mmirage.2.3.0[m] https://github.com/mirage/mirage/archive/v2.3.0.tar.gz downloaded
[KProcessing 10/16: [[32mmirage-types[m: http] [[32mocamlfind[m: http][K[KProcessing 11/16: [[32mmirage-types[m: http] [[32mocamlfind[m: http] [[32mocplib-endian[m: http][K[[32mmirage-types.2.3.0[m] https://github.com/mirage/mirage/archive/v2.3.0.tar.gz downloaded
[KProcessing 11/16: [[32mocamlfind[m: http] [[32mocplib-endian[m: http][K[KProcessing 12/16: [[32mocamlfind[m: http] [[32mocplib-endian[m: http] [[32moptcomp[m: http][K[KProcessing 12/16: [[32mocamlfind[m: http] [[32mocplib-endian[m: http] [[32moptcomp[m: http][K[KProcessing 12/16: [[32mocamlfind[m: http] [[32mocplib-endian[m: http] [[32moptcomp[m: http][K[[32mocplib-endian.0.4[m] https://github.com/OCamlPro/ocplib-endian/archive/0.4.tar.gz downloaded
[KProcessing 12/16: [[32mocamlfind[m: http] [[32moptcomp[m: http][K[KProcessing 13/16: [[32mocamlfind[m: http] [[32moptcomp[m: http] [[32mre[m: http][K[[32moptcomp.1.6[m] https://github.com/diml/optcomp/archive/1.6.tar.gz downloaded
[KProcessing 13/16: [[32mocamlfind[m: http] [[32mre[m: http][K[KProcessing 14/16: [[32mocamlfind[m: http] [[32mre[m: http] [[32msexplib[m: http][K[KProcessing 14/16: [[32mocamlfind[m: http] [[32mre[m: http] [[32msexplib[m: http][K[[32msexplib.112.17.00[m] https://ocaml.janestreet.com/ocaml-core/112.17/files/sexplib-112.17.00.tar.gz downloaded
[KProcessing 14/16: [[32mocamlfind[m: http] [[32mre[m: http][K[KProcessing 15/16: [[32mocamlfind[m: http] [[32mre[m: http] [[32mssl[m: http][K[KProcessing 15/16: [[32mocamlfind[m: http] [[32mre[m: http] [[32mssl[m: http][K[[32mre.1.2.2[m] https://github.com/ocaml/ocaml-re/archive/ocaml-re-1.2.2.tar.gz downloaded
[KProcessing 15/16: [[32mocamlfind[m: http] [[32mssl[m: http][K[KProcessing 16/16: [[32mocamlfind[m: http] [[32mssl[m: http] [[32mtype_conv[m: http][K[KProcessing 16/16: [[32mocamlfind[m: http] [[32mssl[m: http] [[32mtype_conv[m: http][K[[32mtype_conv.112.01.00[m] https://ocaml.janestreet.com/ocaml-core/112.01.00/individual/type_conv-112.01.00.tar.gz downloaded
[KProcessing 16/16: [[32mocamlfind[m: http] [[32mssl[m: http][K[KProcessing 16/16: [[32mocamlfind[m: http] [[32mssl[m: http][K[KProcessing 16/16: [[32mocamlfind[m: http] [[32mssl[m: http][K[[32mocamlfind.1.5.5[m] http://download.camlcity.org/download/findlib-1.5.5.tar.gz downloaded
[KProcessing 16/16: [[32mssl[m: http][K[[32mssl.0.4.7[m] http://downloads.sourceforge.net/project/savonet/ocaml-ssl/0.4.7/ocaml-ssl-0.4.7.tar.gz downloaded

[36m=-=-[m [01mProcessing actions[m [36m-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=[m
[KProcessing  1/16: [[32mcmdliner[m: ocaml][K[KProcessing  2/16: [[32mcmdliner[m: ocaml] [[32mocamlfind[m: ./configure][K[KProcessing  2/16: [[32mcmdliner[m: ocaml] [[32mocamlfind[m: ./configure][K[KProcessing  2/16: [[32mcmdliner[m: ocaml] [[32mocamlfind[m: make all][K-> installed [01mcmdliner[m.0.9.7
[KProcessing  2/16: [[32mocamlfind[m: make all][K[KProcessing  2/16: [[32mocamlfind[m: make opt][K[KProcessing  2/16: [[32mocamlfind[m: make install][K-> installed [01mocamlfind[m.1.5.5
[KProcessing  3/16: [[32mcamlp4[m: ./configure][K[KProcessing  4/16: [[32mcamlp4[m: ./configure] [[32mcrunch[m: ocaml setup.ml][K[KProcessing  5/16: [[32mcamlp4[m: ./configure] [[32mcrunch[m: ocaml setup.ml]            + 1[K[KProcessing  5/16: [[32mcamlp4[m: make all] [[32mcrunch[m: ocaml setup.ml]               + 1[K[KProcessing  5/16: [[32mcamlp4[m: make all] [[32mcrunch[m: ocaml setup.ml]               + 1[K[KProcessing  5/16: [[32mcamlp4[m: make all] [[32mcrunch[m: ocaml setup.ml]               + 1[K[KProcessing  5/16: [[32mcamlp4[m: make all] [[32mcrunch[m: ocaml setup.ml]               + 1[K-> installed [01mcrunch[m.1.4.0
[KProcessing  5/16: [[32mcamlp4[m: make all] [[32mre[m: ocaml setup.ml][K[KProcessing  6/16: [[32mcamlp4[m: make all] [[32mre[m: ocaml setup.ml] [[32mssl[m: ./configure][K[KProcessing  6/16: [[32mcamlp4[m: make all] [[32mre[m: ocaml setup.ml] [[32mssl[m: ./configure][K[31m[ERROR][m The compilation of ssl failed at "./configure --prefix
        /home/opam/.opam/4.02.1".
[KProcessing  6/16: [[32mcamlp4[m: make all] [[32mre[m: ocaml setup.ml]                   + 1[K[KProcessing  6/16: [[32mcamlp4[m: make all] [[32mre[m: ocaml setup.ml][K-> installed [01mre[m.1.2.2
[KProcessing  6/16: [[32mcamlp4[m: make all][K[KProcessing  6/16: [[32mcamlp4[m: make install][K-> installed [01mcamlp4[m.4.02.1+2
[KProcessing  8/16: [[32moptcomp[m: ./configure][K[KProcessing  9/16: [[32moptcomp[m: ./configure] [[32mtype_conv[m: make][K[KProcessing  9/16: [[32moptcomp[m: make] [[32mtype_conv[m: make][K[KProcessing  9/16: [[32moptcomp[m: make] [[32mtype_conv[m: make install][K-> installed [01mtype_conv[m.112.01.00
[KProcessing  9/16: [[32moptcomp[m: make][K[KProcessing 10/16: [[32moptcomp[m: make] [[32msexplib[m: ./configure][K[KProcessing 10/16: [[32moptcomp[m: make] [[32msexplib[m: make][K[KProcessing 10/16: [[32moptcomp[m: make install] [[32msexplib[m: make][K-> installed [01moptcomp[m.1.6
[KProcessing 10/16: [[32msexplib[m: make][K[KProcessing 11/16: [[32mocplib-endian[m: ocaml setup.ml] [[32msexplib[m: make][K[KProcessing 11/16: [[32mocplib-endian[m: ocaml setup.ml] [[32msexplib[m: make][K[KProcessing 11/16: [[32mocplib-endian[m: ocaml setup.ml] [[32msexplib[m: make][K-> installed [01mocplib-endian[m.0.4
[KProcessing 11/16: [[32msexplib[m: make][K[KProcessing 11/16: [[32msexplib[m: make install][K-> installed [01msexplib[m.112.17.00
[KProcessing 14/16: [[32mipaddr[m: ocaml setup.ml][K[KProcessing 14/16: [[32mipaddr[m: make build][K[KProcessing 14/16: [[32mipaddr[m: make install][K-> installed [01mipaddr[m.2.5.0

[31m#===[m [01mERROR[m [01mwhile installing ssl.0.4.7[m [31m=========================================#[m
[33m#[m [33mopam-version[m 1.2.1 (ab224ffd593a168871a14182d6e69d3a902c3f27)
[33m#[m [33mos[m           linux
[33m#[m [33mcommand[m      ./configure --prefix /home/opam/.opam/4.02.1
[33m#[m [33mpath[m         /home/opam/.opam/4.02.1/build/ssl.0.4.7
[33m#[m [33mcompiler[m     4.02.1
[33m#[m [33mexit-code[m    1
[33m#[m [33menv-file[m     /home/opam/.opam/4.02.1/build/ssl.0.4.7/ssl-121-777834.env
[33m#[m [33mstdout-file[m  /home/opam/.opam/4.02.1/build/ssl.0.4.7/ssl-121-777834.out
[33m#[m [33mstderr-file[m  /home/opam/.opam/4.02.1/build/ssl.0.4.7/ssl-121-777834.err
[33m### stdout ###
[m[33m# [m[...]
[33m# [mchecking for ocamldep... /home/opam/.opam/4.02.1/bin/ocamldep
[33m# [mchecking for ocamllex... /home/opam/.opam/4.02.1/bin/ocamllex
[33m# [mchecking for ocamlyacc... /home/opam/.opam/4.02.1/bin/ocamlyacc
[33m# [mchecking for ocamldoc... /home/opam/.opam/4.02.1/bin/ocamldoc
[33m# [mchecking for ocamlmktop... /home/opam/.opam/4.02.1/bin/ocamlmktop
[33m# [mchecking for gcc... (cached) gcc
[33m# [mchecking whether we are using the GNU C compiler... (cached) yes
[33m# [mchecking whether gcc accepts -g... (cached) yes
[33m# [mchecking for gcc option to accept ISO C89... (cached) none needed
[33m# [mchecking for SSL_new in -lssl... no
[33m### stderr ###
[m[33m# [mconfigure: error: Cannot find libssl.



[36m=-=-[m [01mError report[m [36m-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=[m
The following actions were [33maborted[m
  - install [01mcstruct[m      1.5.0
  - install [01mio-page[m      1.4.0
  - install [01mlwt[m          2.4.5
  - install [01mmirage[m       2.3.0
  - install [01mmirage-types[m 2.3.0
The following actions [31mfailed[m
  - install [01mssl[m 0.4.7
The following changes have been performed
  - install [01mcamlp4[m        4.02.1+2 
  - install [01mcmdliner[m      0.9.7    
  - install [01mcrunch[m        1.4.0    
  - install [01mipaddr[m        2.5.0    
  - install [01mocamlfind[m     1.5.5    
  - install [01mocplib-endian[m 0.4      
  - install [01moptcomp[m       1.6      
  - install [01mre[m            1.2.2    
  - install [01msexplib[m       112.17.00
  - install [01mtype_conv[m     112.01.00

The former state can be restored with:
    opam switch import "~/.opam/4.02.1/backup/state-20150211190154.export"
